---
layout: post
title: linux运维--详细命令大全
date: 2018-04-24 05:56:02
tags: linux
categories: linux
---

### linux运维

#### cd 命令 

命令格式 cd [目录名] 切换当前目录到指定目录
- `cd / `进入系统根目录  
- `cd ..` 退回上一级目录（进入当前目录的父目录）
- `cd` 或者 `cd~` 使用cd命令进入当前用户主目录
- `cd /opt/soft` 跳转到指定目录（跳转到指定目录，从根目录开始，目录名称前加 / ,当前目录内的子目录直接写名称即可）
- `cd` - 返回进入此目录前所在的目录
- `cd !$` 把上个命令的参数作为cd参数使用

<!-- more -->

#### ls命令

命令格式 ls [选项] [目录名] 列出目标目录中所有的子目录和文件

常用参数 ：
- `-a , -all` 列出目录下的所有文件，包括以 . 开头的隐含文件
- `A` 同-a，但不列出“.”(表示当前目录)和“..”(表示当前目录的父目录)。
- `-c` 配合 -lt：根据 ctime 排序及显示 ctime (文件状态最后更改的时间)
配合 -l：显示 ctime 但根据名称排序否则，根据 ctime 排序
- `-C` 每栏由上至下列出项目
- `-color[=WHEN]` 控制是否使用色彩分辨文件。WHEN 可以是'never'、'always'或'auto'其中之一
- `-d, –directory` 将目录象文件一样显示，而不是显示其下的文件。
- `-D, –dired` 产生适合 Emacs 的 dired 模式使用的结果
- `-f` 对输出的文件不进行排序，-aU 选项生效，-lst 选项失效
- `-g` 类似 -l,但不列出所有者
- `-G, –no-group` 不列出任何有关组的信息
- `-h, –human-readable` 以容易理解的格式列出文件大小 (例如 1K 234M 2G)
- `-si` 类似 `-h`,但文件大小取 1000 的次方而不是 1024
- `-H, –dereference-command-line` 使用命令列中的符号链接指示的真正目的地
- `-indicator-style=方式` 指定在每个项目名称后加上指示符号<方式>：none (默认)，classify (-F)，file-type (-p)
- `-i, –inode` 印出每个文件的 inode 号
- `-I, –ignore=样式` 不印出任何符合 shell 万用字符<样式>的项目
- `-k` 即 –block-size=1K,以 k 字节的形式表示文件的大小。
- `-l` 除了文件名之外，还将文件的权限、所有者、文件大小等信息详细列出来。
- `-L, –dereference` 当显示符号链接的文件信息时，显示符号链接所指示的对象而并非符号链接本身的信息
- `-m` 所有项目以逗号分隔，并填满整行行宽
- `-o` 类似 -l,显示文件的除组信息外的详细信息。
- `-r, –reverse` 依相反次序排列
- `-R, –recursive` 同时列出所有子目录层
- `-s, –size` 以块大小为单位列出所有文件的大小
- `-S` 根据文件大小排序
- `–sort=WORD` 以下是可选用的 WORD 和它们代表的相应选项：
```
extension -X status -c
none -U time -t
size -S atime -u
time -t access -u
version -v use -u
```
- `-t` 以文件修改时间排序
- `-u` 配合 -lt:显示访问时间而且依访问时间排序
配合 -l:显示访问时间但根据名称排序
否则：根据访问时间排序
- `-U` 不进行排序;依文件系统原有的次序列出项目
- `-v` 根据版本进行排序
- `-w, –width=COLS` 自行指定屏幕宽度而不使用目前的数值
- `-x` 逐行列出项目而不是逐栏列出
- `-X` 根据扩展名排序
- `-1` 每行只列出一个文件
- `-help` 显示此帮助信息并离开
- `-version` 显示版本信息并离开

#### pwd 命令

命令格式 pwd [选项] 查看”当前工作目录“的完整路径
- `pwd -P` 显示出实际路径

#### mkdir 命令

命令格式 mkdir [选项] 目录... 通过 mkdir 命令可以实现在指定位置创建以 DirName(指定的文件名)命名的文件夹或目录。要创建文件夹或目录的用户必须对所创建的文件夹的父文件夹具有写权限。并且，所创建的文件夹(目录)不能与其父目录(即父文件夹)中的文件名重名，即同一个目录下不能有同名的(区分大小写)。
命令参数：
- `-m, --mode=模式`，设定权限<模式> (类似 chmod)，而不是 rwxrwxrwx 减 umask
- `-p, --parents` 可以是一个路径名称。此时若路径中的某些目录尚不存在,加上此选项后,系统将自动建立好那些尚不存在的目录,即一次可以建立多个目录;
- `-v, --verbose` 每次创建新目录都显示信息
- `--help` 显示此帮助信息并退出
- `--version` 输出版本信息并退出

#### rm命令

命令格式 rm [选项] 文件… 删除一个目录中的一个或多个文件或目录，如果没有使用- r选项，则rm不会删除目录。如果使用 rm 来删除文件，通常仍可以将该文件恢复原状。
命令参数：
- `-f, --force` 忽略不存在的文件，从不给出提示。 删除时不给出提示
- `-i, --interactive` 进行交互式删除 删除时需要用户确认
- `-r, -R, --recursive` 指示rm将参数中列出的全部目录和子目录均递归地删除。
- `-v, --verbose` 详细显示进行的步骤
- `--help` 显示此帮助信息并退出
- `--version` 输出版本信息并退出

#### rmdir命令

命令格式 rmdir [选项]... 目录... 该命令从一个目录中删除一个或多个子目录项，删除某目录时也必须具有对父目录的写权限
命令参数：
- `-p` 递归删除目录dirname，当子目录删除后其父目录为空时，也一同被删除。如果整个路径被删除或者由于某种原因保留部分路径，则系统在标准输出上显示相应的信息。
- `-v, --verbose` 显示指令执行过程
- `rmdir` 目录名 命令不能直接删除非空目录

#### mv命令

mv命令是move的缩写，可以用来移动文件或者将文件改名（move (rename) files），是Linux系统下常用的命令，经常用来备份文件或者目录。
命令格式 mv [选项] 源文件或目录 目标文件或目录
视mv命令中第二个参数类型的不同（是目标文件还是目标目录），mv命令将文件重命名或将其移至一个新的目录中。当第二个参数类型是文件时，mv命令完成文件重命名，此时，源文件只能有一个（也可以是源目录名），它将所给的源文件或目录重命名为给定的目标文件名。当第二个参数是已存在的目录名称时，源文件或目录参数可以有多个，mv命令将各参数指定的源文件均移至目标目录中。在跨文件系统移动文件时，mv先拷贝，再将原有文件删除，而链至该文件的链接也将丢失。
命令参数：
- `-b` ：若需覆盖文件，则覆盖前先行备份。
- `-f` ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；
- `-i`：若目标文件 (destination) 已经存在时，就会询问是否覆盖！
- `-u`：若目标文件已经存在，且 source 比较新，才会更新(update)
- `-t` ： --target-directory=DIRECTORY move all SOURCE arguments into DIRECTORY，即指定mv的目标目录，该选项适用于移动多个源文件到一个目录的情况，此时目标目录在前，源文件在后。

#### cp命令

cp命令用来复制文件或者目录，是Linux系统中最常用的命令之一。一般情况下，shell会设置一个别名，在命令行下复制文件时，如果目标文件已经存在，就会询问是否覆盖，不管你是否使用-i参数。但是如果是在shell脚本中执行cp时，没有-i参数时不会询问是否覆盖。这说明命令行和shell脚本的执行方式有些不同。
命令格式：`cp [选项]... [-T] 源 目的`
或：`cp [选项]... 源... 目录`
或：`cp [选项]... -t 目录 源...` 将源文件复制至目标文件，或将多个源文件复制至目标目录。
命令参数：
- `-a, --archive` 等于-dR --preserve=all
- `--backup[=CONTROL` 为每个已存在的目标文件创建备份
- `-b 类似--backup` 但不接受参数
- `--copy-contents` 在递归处理是复制特殊文件内容
- `-d` 等于--no-dereference --preserve=links
- `-f, --force` 如果目标文件无法打开则将其移除并重试(当 -n 选项存在时则不需再选此项)
- `-i, --interactive` 覆盖前询问(使前面的 -n 选项失效)
- `-H` 跟随源文件中的命令行符号链接
- `-l, --link` 链接文件而不复制
- `-L, --dereference` 总是跟随符号链接
- `-n, --no-clobber` 不要覆盖已存在的文件(使前面的 -i 选项失效)
- `-P, --no-dereference` 不跟随源文件中的符号链接
- `-p` 等于--preserve=模式,所有权,时间戳
- `--preserve[=属性列表 `保持指定的属性(默认：模式,所有权,时间戳)，如果可能保持附加属性：环境、链接、xattr 等
- `-R, -r, --recursive` 复制目录及目录内的所有项目

#### cat命令

cat命令的用途是连接文件或标准输入并打印。这个命令常用来显示文件内容，或者将几个文件连接起来显示，或者从标准输入读取内容并显示，它常与重定向符号配合使用。
命令格式 cat [选项] [文件]...
cat主要有三大功能：
1.一次显示整个文件:cat filename
2.从键盘创建一个文件:cat > filename 只能创建新文件,不能编辑已有文件.
3.将几个文件合并为一个文件:cat file1 file2 > file
命令参数：
- `-A, --show-all` 等价于 -vET
- `-b, --number-nonblank` 对非空输出行编号
- `-e` 等价于 -vE
- `-E, --show-ends` 在每行结束处显示 $
- `-n, --number` 对输出的所有行编号,由1开始对所有输出的行数编号
- `-s, --squeeze-blank` 有连续两行以上的空白行，就代换为一行的空白行
- `-t` 与 `-vT` 等价
- `-T, --show-tabs` 将跳格字符显示为 ^I
- `-u `(被忽略)
- `-v, --show-nonprinting` 使用 ^ 和 M- 引用，除了 LFD 和 TAB 之外

>查看某个文件的第20至30行内容：`sed -n '20,30p' ett.txt  （推荐）`

#### more命令

more命令，功能类似 cat ，cat命令是整个文件的内容从上到下显示在屏幕上。 more会以一页一页的显示方便使用者逐页阅读，而最基本的指令就是按空白键（space）就往下一页显示，按 b 键就会往回（back）一页显示，而且还有搜寻字串的功能 。more命令从前向后读取文件，因此在启动时就加载整个文件。
命令格式：
`more [-dlfpcsu ] [-num ] [+/ pattern] [+ linenum] [file ... ]`
命令功能：
more命令和cat的功能一样都是查看文件里的内容，但有所不同的是more可以按页来查看文件的内容，还支持直接跳转行等功能。
命令参数：
- `+n` 从笫n行开始显示
- `-n` 定义屏幕大小为n行
- `+/pattern` 在每个档案显示前搜寻该字串（pattern），然后从该字串前两行之后开始显示
- `-c` 从顶部清屏，然后显示
- `-d` 提示“Press space to continue，’q’ to quit（按空格键继续，按q键退出）”，禁用响铃功能
- `-l` 忽略Ctrl+l（换页）字符
- `-p` 通过清除窗口而不是滚屏来对文件进行换页，与-c选项相似
- `-s` 把连续的多个空行显示为一行
- `-u` 把文件内容中的下画线去掉
常用操作命令：
```
Enter 向下n行，需要定义。默认为1行
Ctrl+F 向下滚动一屏
空格键 向下滚动一屏
Ctrl+B 返回上一屏
= 输出当前行的行号
：f 输出文件名和当前行的行号
V 调用vi编辑器
!命令 调用Shell，并执行命令
q 退出more
```

#### tail命令

tail 命令从指定点开始将文件写到标准输出.使用tail命令的-f选项可以方便的查阅正在改变的日志文件,tail -f filename会把filename里最尾部的内容显示在屏幕上,并且不断刷新,使你看到最新的文件内容.
命令格式;
`tail[必要参数][选择参数][文件]`
命令功能：
用于显示指定文件末尾内容，不指定文件时，作为输入信息进行处理。常用查看日志文件。
命令参数：
- `-f` 循环读取
- `-q` 不显示处理信息
- `-v` 显示详细的处理信息
- `-c<数目>` 显示的字节数
- `-n<行数>` 显示行数
- `--pid=PID` 与`-f`合用,表示在进程ID,PID死掉之后结束.
- `-q, --quiet, --silent` 从不输出给出文件名的首部
- `-s, --sleep-interval=S`与`-f`合用,表示在每次反复的间隔休眠S秒

#### find 命令

命令格式：
`find pathname -options [-print -exec -ok ...]`
命令功能：
用于在文件树中查找文件，并作出相应的处理
命令参数：
- `pathname`: find命令所查找的目录路径。例如用.来表示当前目录，用/来表示系统根目录。
- `-print`： find命令将匹配的文件输出到标准输出。
- `-exec`： find命令对匹配的文件执行该参数所给出的shell命令。相应命令的形式为'command' { } \;，注意{ }和\；之间的空格。
- `-ok`： 和-exec的作用相同，只不过以一种更为安全的模式来执行该参数所给出的shell命令，在执行每一个命令之前，都会给出提示，让用户来确定是否执行。
命令选项：
- `-name`按照文件名查找文件。
- `-perm` 按照文件权限来查找文件。
- `-prune` 使用这一选项可以使find命令不在当前指定的目录中查找，如果同时使用-depth选项，那么-prune将被find命令忽略。
- `-user` 按照文件属主来查找文件。
- `-group` 按照文件所属的组来查找文件。
- `-mtime -n +n` 按照文件的更改时间来查找文件， - n表示文件更改时间距现在n天以内，+ n表示文件更改时间距现在n天以前。find命令还有-atime和-ctime 选项，但它们都和-m time选项。
- `-nogroup` 查找无有效所属组的文件，即该文件所属的组在/etc/groups中不存在。
- `-nouser` 查找无有效属主的文件，即该文件的属主在/etc/passwd中不存在。
- `-newer file1 ! file2` 查找更改时间比文件file1新但比文件file2旧的文件。
- `-type` 查找某一类型的文件，诸如：

```
b - 块设备文件。
d - 目录。
c - 字符设备文件。
p - 管道文件。
l - 符号链接文件。
f - 普通文件。
```

```
-size n：[c] 查找文件长度为n块的文件，带有c时表示文件长度以字节计。
-depth：在查找文件时，首先查找当前目录中的文件，然后再在其子目录中查找。
-fstype：查找位于某一类型文件系统中的文件，这些文件系统类型通常可以在配置文件/etc/fstab中找到，该配置文件中包含了本系统中有关文件系统的信息。
-mount：在查找文件时不跨越文件系统mount点。
-follow：如果find命令遇到符号链接文件，就跟踪至链接所指向的文件。
-cpio：对匹配的文件使用cpio命令，将这些文件备份到磁带设备中。
另外,下面三个的区别:
-amin n 查找系统中最后N分钟访问的文件
-atime n 查找系统中最后n*24小时访问的文件
-cmin n 查找系统中最后N分钟被改变文件状态的文件
-ctime n 查找系统中最后n*24小时被改变文件状态的文件
-mmin n 查找系统中最后N分钟被改变文件数据的文件
-mtime n 查找系统中最后n*24小时被改变文件数据的文件
```

#### tar命令
命令格式：
`tar[必要参数][选择参数][文件]`
命令功能：用来压缩和解压文件。tar本身不具有压缩功能。他是调用压缩功能实现的
命令参数：
必要参数有如下：
- `-A` 新增压缩文件到已存在的压缩
- `-B` 设置区块大小
- `-c`建立新的压缩文件
- `-d` 记录文件的差别
- `-r` 添加文件到已经压缩的文件
- `-u` 添加改变了和现有的文件到已经存在的压缩文件
- `-x` 从压缩的文件中提取文件
- `-t` 显示压缩文件的内容
- `-z` 支持gzip解压文件
- `-j` 支持bzip2解压文件
- `-Z` 支持compress解压文件
- `-v` 显示操作过程
- `-l` 文件系统边界设置
- `-k` 保留原有文件不覆盖
- `-m` 保留文件不被覆盖
- `-W` 确认压缩文件的正确性
可选参数如下：
```
-b 设置区块数目
-C 切换到指定目录
-f 指定压缩文件
--help 显示帮助信息
--version 显示版本信息
```

常见解压/压缩命令：  

**tar**

解包：`tar xvf FileName.tar`
打包：`tar cvf FileName.tar DirName`
（注：tar是打包，不是压缩！）

**.gz**

解压1：`gunzip FileName.gz`
解压2：`gzip -d FileName.gz`
压缩：gzip FileName

**.tar.gz** 和 **.tgz**

解压：`tar zxvf FileName.tar.gz`
压缩：`tar zcvf FileName.tar.gz DirName`

**.bz2**

解压1：`bzip2 -d FileName.bz2`
解压2：`bunzip2 FileName.bz2`
压缩： `bzip2 -z FileName`

**.tar.bz2**

解压：`tar jxvf FileName.tar.bz2`
压缩：`tar jcvf FileName.tar.bz2 DirName`

**.bz**

解压1：`bzip2 -d FileName.bz`
解压2：`bunzip2 FileName.bz`
压缩：未知

** .tar.bz**

解压：`tar jxvf FileName.tar.bz`
压缩：未知

**.Z**

解压：`uncompress FileName.Z`
压缩：`compress FileName`

**.tar.Z**

解压：`tar Zxvf FileName.tar.Z`
压缩：`tar Zcvf FileName.tar.Z DirName`

**.zip**

解压：`unzip FileName.zip`
压缩：`zip FileName.zip DirName`

**.rar**

解压：`rar x FileName.rar`
压缩：`rar a FileName.rar DirName`

#### ps命令
命令格式：`ps[参数]`
命令功能：用来显示当前进程的状态
命令参数：
- `a` 显示所有进程
- `-a` 显示同一终端下的所有程序
- `-A` 显示所有进程
- `c` 显示进程的真实名称
- `-N` 反向选择
- `-e` 等于“-A”
- `e` 显示环境变量
- `f` 显示程序间的关系
- `-H` 显示树状结构
- `r` 显示当前终端的进程
- `T` 显示当前终端的所有程序
- `u` 指定用户的所有进程
- `-au` 显示较详细的资讯
- `-aux` 显示所有包含其他使用者的行程
- `-C<命令>` 列出指定命令的状况
- `--lines<行数>` 每页显示的行数
- `--width<字符数>` 每页显示的字符数
- `--help` 显示帮助信息
- `--version` 显示版本显示

#### top 命令 
这个命令适合用来实时掌握操作系统的整体情况，且能够实时反映出系统各个进程的资源的占用情况，类似于 windows 的任务管理器。使用 top 命令可以显示进程信息。

#### netstat 命令
这个命令可以知道 Linux 系统的网络情况，适合用来查看网络连接信息。其中，可以查看当前的所有连接。

#### sar 命令
这个命令适合用来监控 CPU 的使用率和空闲情况，以及磁盘 I/O 的使用情况、网卡流量的使用情况等。监控 CPU 的情况，可以使用 –u 参数，输出 CPU 使用情况的统计信息。下面来看一个例子，其中，每秒采样一次，连续 10 次，观察 CPU 的使用情况。

#### vmstat 命令
这个命令适合用来监控 CPU 使用率，内存使用，虚拟内存交换情况，IO读写情况等。下面来看一个例子，其中，每秒采样一次，连续 5 次，观察虚拟内存的使用情况。

#### nmon 命令
nmon 可以在一个屏幕上显示所有重要的性能信息，包括 CPU 信息、内存信息、网络信息、磁盘 I/O 信息等，并动态地对其进行更新。可通过 IBM 官网上免费下载获取或者通过 yum 命令直接安装。这里，使用 wget 方式进行下载与安装。

