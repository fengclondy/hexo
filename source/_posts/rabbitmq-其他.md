---
layout: post
title: rabbitmq--其他
date: 2018-09-01 09:38:05
tags: rabbitmq
categories: rabbitmq
---

#### 消息中间键的优缺点

优点：解耦、异步，削峰。总的来说就是提高可扩展性，响应速度和系统的并发性。

缺点：1、增加了系统的复杂性 ； 2、降低了系统的可用性

#### 消息中间键如何选型

中小公司推荐使用rabbitmq，大公司推荐使用rocketmq和kafka。

#### 如何保证消息的高可用

集群。以rabbitmq为例，采用多master多slave模式部署架构。生产者将消息发布到主服务器上，消费者订阅主服务器和从服务器上的消息。

#### 如何保证消息的重复消费

保存消息的唯一属性。数据库中可以插入数据，保存唯一id；redis中设置set，保证消费过的不会重复消费。

#### 如何保证消息的可靠传输

生产者：开启事物机制，发送后等待中间键的消息回执。

消息中间键：持久化处理。1、将queue的持久化标识durable设置为true,则代表是一个持久的队列2、发送消息的时候将deliveryMode=2

消费者：开启自动确认消息模式。

<!-- more -->


